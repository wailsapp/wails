---
slug: wails-v2-beta-for-windows
title: Windows 平台的 Wails v2 测试版
authors:
  - leaanthony
tags:
  - wails
  - v2
---

<div class="text--center">
  <img
    src={require("@site/static/img/wails.png").default}
    width="40%"
    class="screenshot"
  />
</div>

<br />

When I first announced Wails on Reddit, just over 2 years ago from a train in Sydney, I did not expect it to get much attention. A few days later, a prolific tech vlogger released a tutorial video, gave it a positive review and from that point on, interest in the project has skyrocketed.

It was clear that people were excited about adding web frontends to their Go projects, and almost immediately pushed the project beyond the proof of concept that I had created. At the time, Wails used the [webview](https://github.com/webview/webview) project to handle the frontend, and the only option for Windows was the IE11 renderer. Many bug reports were rooted in this limitation: poor JavaScript/CSS support and no dev tools to debug it. This was a frustrating development experience but there wasn't much that could have been done to rectify it.

很长一段时间以来，我一直坚信微软最终会解决他们的浏览器问题。 世界在不断进步，前端开发正在蓬勃发展，而 IE 并没有做到这一点。 When Microsoft announced the move to using Chromium as the basis for their new browser direction, I knew it was only a matter of time until Wails could use it, and move the Windows developer experience to the next level.

今天，我很高兴地宣布：**Windows 的 Wails v2 公测啦**！ There's a huge amount to unpack in this release, so grab a drink, take a seat and we'll begin...

### 没有 CGO 依赖

No, I'm not joking: _No_ _CGO_ _dependency_ 🤯! The thing about Windows is that, unlike MacOS and Linux, it doesn't come with a default compiler. 此外，CGO 需要一个 mingw 编译器，并且有大量不同的安装选项。 删除 CGO 的要求大大简化了设置，并使调试变得非常容易。 Whilst I have put a fair bit of effort in getting this working, the majority of the credit should go to [John Chadwick](https://github.com/jchv) for not only starting a couple of projects to make this possible, but also being open to someone taking those projects and building on them. Credit also to [Tad Vizbaras](https://github.com/tadvi) whose [winc](https://github.com/tadvi/winc) project started me down this path.

### WebView2 Chromium 渲染引擎

<div class="text--center">
  <img
    src={require("@site/static/img/devtools.png").default}
    width="75%"
    class="screenshot"
  />
</div>

<br />

最终，Windows 开发人员为他们的应用程序获得了一流的渲染引擎！ 扭曲前端代码以在 Windows 上工作的日子已经一去不复返了。 最重要的是，您将获得一流的开发者工具体验！

但是，WebView2 组件确实需要将其放置`WebView2Loader.dll`在二进制文件旁边。 这使得分发比我们 gophers 习惯的更痛苦。 All solutions and libraries (that I know of) that use WebView2 have this dependency.

However, I'm really excited to announce that Wails applications _have no such requirement_! Thanks to the wizardry of [John Chadwick](https://github.com/jchv), we are able to bundle this dll inside the binary and get Windows to load it as if it were present on disk.

Gophers 欢呼吧！ 单个二进制文件的构想依然存在！

### 新功能

<div class="text--center">
  <img
    src={require("@site/static/img/wails-menus.png").default}
    width="60%"
    class="screenshot"
  />
</div>

<br />

有很多对原生菜单支持的请求。 Wails 终于帮您搞定了。 应用程序菜单现已可用，并且包括对大多数原生菜单功能的支持。 This includes standard menu items, checkboxes, radio groups, submenus and separators.

在 v1 中有大量的请求，要求能够更好地控制窗口本身。 我很高兴地宣布，有专门用于此的新运行时 API。 它功能丰富，支持多显示器配置。 There is also an improved dialogs API: Now, you can have modern, native dialogs with rich configuration to cater for all your dialog needs.

现在可以选择随项目生成 IDE 配置。 这意味着如果您在受支持的 IDE 中打开您的项目，它已经被配置为构建和调试您的应用程序。 目前支持 VSCode，但我们希望尽快支持其他 IDE，例如 Goland。

<div class="text--center">
  <img
    src={require("@site/static/img/vscode.png").default}
    width="100%"
    class="screenshot"
  />
</div>

<br />

### 无需打包资源

v1 的一个巨大痛点是需要将整个应用程序压缩为单个 JS 和 CSS 文件。 I'm happy to announce that for v2, there is no requirement to bundle assets, in any way, shape or form. 想要加载本地图片？ Use an `<img>` tag with a local src path. 想使用很酷的字体吗？ 复制它并在你的 CSS 中添加它的路径。

> 哇，这听起来像一个网络服务器......

是的，它就像一个网络服务器一样工作，但它不是。

> 那么我如何包含我的资源？

您只需将`embed.FS`包含所有资源的单个文件传递到您的应用程序配置中。 他们甚至不需要在顶级目录中——Wails 会为你解决这个问题。

### 全新的开发体验

<div class="text--center">
  <img
    src={require("@site/static/img/browser.png").default}
    width="60%"
    class="screenshot"
  />
</div>

<br />

现在不需要打包资源，它启用了全新的开发体验。 新`wails dev`命令将构建并运行您的应用程序，但它不使用`embed.FS`中的资源，而是直接从磁盘加载它们。

它还提供了附加功能：

- 热重载 - 对前端资源的任何更改都将触发并自动重载应用程序前端
- 自动重新构建 - 对 Go 代码的任何更改都将重新构建并重新启动您的应用程序

除此之外，网络服务器将在端口 34115 上启动。 This will serve your application to any browser that connects to it. 所有连接的 Web 浏览器都会响应系统事件，例如资源更改时的热重载。

在 Go 中，我们习惯于在应用程序中处理结构。 将结构发送到我们的前端并将它们用作我们应用程序中的状态通常很有用。 In v1, this was a very manual process and a bit of a burden on the developer. 我很高兴地宣布，在 v2 中，任何在开发模式下运行的应用程序都将自动为所有结构生成 Typescript 模型，这些结构是绑定方法的输入或输出参数。 这实现了两个世界之间数据模型的无缝交换。

除此之外，还会动态生成另一个 JS 模块来包装您的所有绑定方法。 This provides JSDoc for your methods, providing code completion and hinting in your IDE. It's really cool when you get data models auto-imported when hitting tab in an auto-generated module wrapping your Go code!

### 远程模板

<div class="text--center">
  <img
    src={require("@site/static/img/remote.png").default}
    width="60%"
    class="screenshot"
  />
</div>

<br />

让应用程序快速启动并运行一直是 Wails 项目的一个关键目标。 当我们推出时，我们试图涵盖当时的很多现代框架：react、vue 和 angular。 前端开发的世界非常固执己见，发展迅速，很难保持领先地位！ As a result, we found our base templates getting out of date pretty quickly and this caused a maintenance headache. 这也意味着，我们没有为最新和最伟大的技术栈提供酷炫的现代模板。

在 v2 中，我希望通过让您能够自己创建和托管模板来增强社区的能力，而不是依赖于 Wails 项目。 所以现在您可以使用社区支持的模板创建项目！ I hope this will inspire developers to create a vibrant ecosystem of project templates. I'm really quite excited about what our developer community can create!

### 结语

Wails v2 代表了该项目的新起点。 此版本的目的是获得有关新方式的反馈，并在完整版本发布之前解决所有错误。 欢迎提出您的意见。 请直接反馈到 [v2 测试版](https://github.com/wailsapp/wails/discussions/828)讨论板。

为了达到这一点，经历了许多曲折和坎坷。 This was due partly to early technical decisions that needed changing, and partly because some core problems we had spent time building workarounds for were fixed upstream: Go’s embed feature is a good example. Fortunately, everything came together at the right time, and today we have the very best solution that we can have. I believe the wait has been worth it - this would not have been possible even 2 months ago.

我还需要特别感谢 :pray: 以下人员，因为没有他们，这个版本就不会存在：

- [Misitebao](https://github.com/misitebao) - 中文翻译的主要人员和和令人难以置信的漏洞发现者。
- [John Chadwick](https://github.com/jchv) - 他在 [go-webview2](https://github.com/jchv/go-webview2) 和 [go-winloader](https://github.com/jchv/go-winloader) 方面的出色工作使 Windows 版本成为可能。
- [Tad Vizbaras](https://github.com/tadvi) - 他的[winc](https://github.com/tadvi/winc)项目是走向纯粹的 Go Wails 的第一步。
- [Mat Ryer](https://github.com/matryer) - 他的支持、鼓励和反馈确实推动了项目向前发展。

And finally, I'd like to give a special thank you to all the [project sponsors](/credits#sponsors), including [JetBrains](https://www.jetbrains.com?from=Wails), whose support drive the project in many ways behind the scenes.

我期待看到在项目的下一个激动人心的阶段人们用 Wails 构建什么！

Lea.

PS：MacOS 和 Linux 用户不必感到被忽略了——移植到这个新基础上的工作正在积极进行中，大部分复杂的工作已经完成。 坚持下去...

PPS：如果您或您的公司发现 Wails 有用，可以考虑[赞助该项目](https://github.com/sponsors/leaanthony)。 谢谢！
