---
title: Dialogs API
description: Complete reference for native dialog APIs
sidebar:
  order: 5
---

import { Card, CardGrid } from "@astrojs/starlight/components";

## Overview

The Dialogs API provides methods to show native file dialogs and message dialogs. All dialogs are accessed through the `app.Dialog` manager.

**Dialog Types:**
- **File Dialogs** - Open and Save dialogs
- **Message Dialogs** - Info, Error, Warning, and Question dialogs

All dialogs are **native OS dialogs** that match the platform's look and feel.

## File Dialogs

### app.Dialog.OpenFile()

Creates a file open dialog.

```go
func (dm *DialogManager) OpenFile() *OpenFileDialogStruct
```

**Example:**
```go
dialog := app.Dialog.OpenFile()
```

### OpenFileDialogStruct Methods

#### SetTitle()

Sets the dialog title.

```go
func (d *OpenFileDialogStruct) SetTitle(title string) *OpenFileDialogStruct
```

**Example:**
```go
dialog.SetTitle("Select Image")
```

#### AddFilter()

Adds a file type filter. Call multiple times to add multiple filters.

```go
func (d *OpenFileDialogStruct) AddFilter(displayName, pattern string) *OpenFileDialogStruct
```

**Parameters:**
- `displayName` - Filter label (e.g., "Image Files")
- `pattern` - Semicolon-separated extensions (e.g., `"*.png;*.jpg"`)

**Example:**
```go
dialog.AddFilter("Images", "*.png;*.jpg;*.gif").
    AddFilter("Documents", "*.pdf;*.docx").
    AddFilter("All Files", "*.*")
```

#### SetDirectory()

Sets the initial directory.

```go
func (d *OpenFileDialogStruct) SetDirectory(directory string) *OpenFileDialogStruct
```

**Example:**
```go
homeDir, _ := os.UserHomeDir()
dialog.SetDirectory(homeDir)
```

#### CanChooseDirectories()

Sets whether directories can be selected.

```go
func (d *OpenFileDialogStruct) CanChooseDirectories(canChooseDirectories bool) *OpenFileDialogStruct
```

#### CanChooseFiles()

Sets whether files can be selected (default: true).

```go
func (d *OpenFileDialogStruct) CanChooseFiles(canChooseFiles bool) *OpenFileDialogStruct
```

#### CanCreateDirectories()

Sets whether new directories can be created in the dialog.

```go
func (d *OpenFileDialogStruct) CanCreateDirectories(canCreateDirectories bool) *OpenFileDialogStruct
```

#### ShowHiddenFiles()

Sets whether hidden files are shown.

```go
func (d *OpenFileDialogStruct) ShowHiddenFiles(showHiddenFiles bool) *OpenFileDialogStruct
```

#### AttachToWindow()

Attaches the dialog to a specific window (sheet on macOS).

```go
func (d *OpenFileDialogStruct) AttachToWindow(window Window) *OpenFileDialogStruct
```

#### PromptForSingleSelection()

Shows the dialog and returns the selected file.

```go
func (d *OpenFileDialogStruct) PromptForSingleSelection() (string, error)
```

**Returns:**
- `string` - Selected file path (empty if cancelled)
- `error` - Error if failed

**Example:**
```go
path, err := app.Dialog.OpenFile().
    SetTitle("Select Image").
    AddFilter("Images", "*.png;*.jpg;*.gif").
    PromptForSingleSelection()

if err != nil {
    // Handle error
    return
}

if path == "" {
    // User cancelled
    return
}

// Use the selected file
processFile(path)
```

#### PromptForMultipleSelection()

Shows the dialog and returns multiple selected files.

```go
func (d *OpenFileDialogStruct) PromptForMultipleSelection() ([]string, error)
```

**Returns:**
- `[]string` - Array of selected file paths
- `error` - Error if failed

**Example:**
```go
paths, err := app.Dialog.OpenFile().
    SetTitle("Select Images").
    AddFilter("Images", "*.png;*.jpg").
    PromptForMultipleSelection()

if err != nil {
    return
}

for _, path := range paths {
    processFile(path)
}
```

### Selecting Folders

There is no separate folder dialog. Use `OpenFile()` with directory selection enabled:

```go
folder, err := app.Dialog.OpenFile().
    SetTitle("Select Output Folder").
    CanChooseDirectories(true).
    CanChooseFiles(false).
    PromptForSingleSelection()

if err != nil {
    return
}

// Use the selected folder
outputDir = folder
```

### app.Dialog.SaveFile()

Creates a file save dialog.

```go
func (dm *DialogManager) SaveFile() *SaveFileDialogStruct
```

**Example:**
```go
dialog := app.Dialog.SaveFile()
```

### SaveFileDialogStruct Methods

#### SetTitle()

Sets the dialog title.

```go
func (d *SaveFileDialogStruct) SetTitle(title string) *SaveFileDialogStruct
```

#### SetFilename()

Sets the default filename.

```go
func (d *SaveFileDialogStruct) SetFilename(filename string) *SaveFileDialogStruct
```

**Example:**
```go
dialog.SetFilename("document.pdf")
```

#### AddFilter()

Adds a file type filter (same as OpenFileDialogStruct).

```go
func (d *SaveFileDialogStruct) AddFilter(displayName, pattern string) *SaveFileDialogStruct
```

#### SetDirectory()

Sets the initial directory.

```go
func (d *SaveFileDialogStruct) SetDirectory(directory string) *SaveFileDialogStruct
```

#### PromptForSingleSelection()

Shows the dialog and returns the save path.

```go
func (d *SaveFileDialogStruct) PromptForSingleSelection() (string, error)
```

**Example:**
```go
path, err := app.Dialog.SaveFile().
    SetTitle("Save Document").
    SetFilename("untitled.pdf").
    AddFilter("PDF Document", "*.pdf").
    PromptForSingleSelection()

if err != nil {
    return
}

if path == "" {
    // User cancelled
    return
}

// Save to the selected path
saveDocument(path)
```

## Message Dialogs

All message dialogs are created through the `app.Dialog` manager and return a `*MessageDialog`. The dialog type (Info, Question, Warning, Error) is set internally.

### app.Dialog.Info()

Creates an information dialog.

```go
func (dm *DialogManager) Info() *MessageDialog
```

### app.Dialog.Question()

Creates a question dialog.

```go
func (dm *DialogManager) Question() *MessageDialog
```

### app.Dialog.Warning()

Creates a warning dialog.

```go
func (dm *DialogManager) Warning() *MessageDialog
```

### app.Dialog.Error()

Creates an error dialog.

```go
func (dm *DialogManager) Error() *MessageDialog
```

### MessageDialog Methods

#### SetTitle()

Sets the dialog title.

```go
func (d *MessageDialog) SetTitle(title string) *MessageDialog
```

#### SetMessage()

Sets the dialog message.

```go
func (d *MessageDialog) SetMessage(message string) *MessageDialog
```

#### SetIcon()

Sets a custom icon for the dialog.

```go
func (d *MessageDialog) SetIcon(icon []byte) *MessageDialog
```

#### AddButton()

Adds a button to the dialog. Returns the created `*Button` for further configuration.

```go
func (d *MessageDialog) AddButton(s string) *Button
```

**Returns:** `*Button` - The created button

#### SetDefaultButton()

Sets the default button (activated by pressing Enter).

```go
func (d *MessageDialog) SetDefaultButton(button *Button) *MessageDialog
```

**Note:** Takes a `*Button` pointer, not an index.

#### SetCancelButton()

Sets the cancel button (activated by pressing Escape).

```go
func (d *MessageDialog) SetCancelButton(button *Button) *MessageDialog
```

**Note:** Takes a `*Button` pointer, not an index.

#### AttachToWindow()

Attaches the dialog to a window (sheet on macOS).

```go
func (d *MessageDialog) AttachToWindow(window Window) *MessageDialog
```

#### Show()

Shows the dialog. This method does not return a value; use button callbacks to handle user responses.

```go
func (d *MessageDialog) Show()
```

### Button Methods

Each button returned by `AddButton()` supports:

```go
func (b *Button) OnClick(callback func()) *Button
func (b *Button) SetAsDefault() *Button
func (b *Button) SetAsCancel() *Button
```

### Message Dialog Examples

**Simple info dialog:**
```go
app.Dialog.Info().
    SetTitle("Success").
    SetMessage("File saved successfully!").
    Show()
```

**Error dialog:**
```go
app.Dialog.Error().
    SetTitle("Error").
    SetMessage("Failed to save file: " + err.Error()).
    Show()
```

**Warning dialog:**
```go
app.Dialog.Warning().
    SetTitle("Warning").
    SetMessage("This action cannot be undone.").
    Show()
```

**Question dialog with buttons:**
```go
dialog := app.Dialog.Question().
    SetTitle("Confirm").
    SetMessage("Do you want to save changes?")

saveBtn := dialog.AddButton("Save")
dontSaveBtn := dialog.AddButton("Don't Save")
cancelBtn := dialog.AddButton("Cancel")

saveBtn.SetAsDefault()
cancelBtn.SetAsCancel()

saveBtn.OnClick(func() {
    saveDocument()
})

dontSaveBtn.OnClick(func() {
    // Continue without saving
})

cancelBtn.OnClick(func() {
    // Do nothing - cancel
})

dialog.Show()
```

## Complete Examples

### File Selection Example

```go
type FileService struct{}

func (s *FileService) OpenImage(app *application.App) (string, error) {
    return app.Dialog.OpenFile().
        SetTitle("Select Image").
        AddFilter("Images", "*.png;*.jpg;*.jpeg;*.gif").
        AddFilter("All Files", "*.*").
        PromptForSingleSelection()
}

func (s *FileService) SaveDocument(app *application.App, defaultName string) (string, error) {
    return app.Dialog.SaveFile().
        SetTitle("Save Document").
        SetFilename(defaultName).
        AddFilter("PDF Document", "*.pdf").
        AddFilter("Text Document", "*.txt").
        PromptForSingleSelection()
}

func (s *FileService) SelectOutputFolder(app *application.App) (string, error) {
    return app.Dialog.OpenFile().
        SetTitle("Select Output Folder").
        CanChooseDirectories(true).
        CanChooseFiles(false).
        PromptForSingleSelection()
}
```

### Confirmation Dialog Example

```go
func confirmDelete(app *application.App) {
    dialog := app.Dialog.Question().
        SetTitle("Confirm Delete").
        SetMessage("Are you sure you want to delete this item?")

    deleteBtn := dialog.AddButton("Delete")
    cancelBtn := dialog.AddButton("Cancel")

    cancelBtn.SetAsDefault() // Default to Cancel for safety
    cancelBtn.SetAsCancel()

    deleteBtn.OnClick(func() {
        deleteFromDatabase(id)
    })

    dialog.Show()
}
```

### Error Handling with Dialogs

```go
func saveFile(app *application.App, data []byte) error {
    // Select save location
    path, err := app.Dialog.SaveFile().
        SetTitle("Save File").
        SetFilename("data.json").
        AddFilter("JSON File", "*.json").
        PromptForSingleSelection()

    if err != nil {
        return err
    }

    if path == "" {
        // User cancelled - not an error
        return nil
    }

    // Attempt to save
    err = os.WriteFile(path, data, 0644)
    if err != nil {
        app.Dialog.Error().
            SetTitle("Save Failed").
            SetMessage(fmt.Sprintf("Could not save file: %v", err)).
            Show()
        return err
    }

    app.Dialog.Info().
        SetTitle("Success").
        SetMessage("File saved successfully!").
        Show()

    return nil
}
```

## Best Practices

### Do

- **Use native dialogs** - They match the platform's look and feel
- **Provide clear titles** - Help users understand the purpose
- **Set appropriate filters** - Guide users to correct file types using `AddFilter()`
- **Handle empty results** - User cancellation returns an empty string (not an error)
- **Show confirmation for destructive actions** - Use question dialogs
- **Set sensible defaults** - Default directory, filename, etc.

### Don't

- **Don't hardcode paths** - Use `os.UserHomeDir()` or similar
- **Don't overuse dialogs** - They interrupt workflow
- **Don't use ambiguous button labels** - Be specific: "Save" vs "OK"
