---
title: Dialogs API
description: Complete reference for native dialog APIs
sidebar:
  order: 5
---

import { Card, CardGrid } from "@astrojs/starlight/components";

## Overview

The Dialogs API provides methods to show native file dialogs and message dialogs.

**Dialog Types:**
- **File Dialogs** - Open, Save, and Select Folder dialogs
- **Message Dialogs** - Info, Error, Warning, and Question dialogs

All dialogs are **native OS dialogs** that match the platform's look and feel.

## File Dialogs

### OpenFileDialog()

Creates a file open dialog.

```go
func (a *App) OpenFileDialog() *OpenFileDialog
```

**Example:**
```go
dialog := app.OpenFileDialog()
```

### OpenFileDialog Methods

#### SetTitle()

Sets the dialog title.

```go
func (d *OpenFileDialog) SetTitle(title string) *OpenFileDialog
```

**Example:**
```go
dialog.SetTitle("Select Image")
```

#### SetFilters()

Sets file type filters.

```go
func (d *OpenFileDialog) SetFilters(filters []FileFilter) *OpenFileDialog
```

**FileFilter structure:**
```go
type FileFilter struct {
    DisplayName string // "Images", "Documents", etc.
    Pattern     string // "*.png;*.jpg", "*.pdf;*.doc", etc.
}
```

**Example:**
```go
dialog.SetFilters([]application.FileFilter{
    {DisplayName: "Images", Pattern: "*.png;*.jpg;*.gif"},
    {DisplayName: "Documents", Pattern: "*.pdf;*.docx"},
    {DisplayName: "All Files", Pattern: "*.*"},
})
```

#### SetDefaultDirectory()

Sets the initial directory.

```go
func (d *OpenFileDialog) SetDefaultDirectory(path string) *OpenFileDialog
```

**Example:**
```go
homeDir, _ := os.UserHomeDir()
dialog.SetDefaultDirectory(homeDir)
```

#### PromptForSingleSelection()

Shows the dialog and returns the selected file.

```go
func (d *OpenFileDialog) PromptForSingleSelection() (string, error)
```

**Returns:**
- `string` - Selected file path
- `error` - Error if cancelled or failed

**Example:**
```go
path, err := app.OpenFileDialog().
    SetTitle("Select Image").
    SetFilters([]application.FileFilter{
        {DisplayName: "Images", Pattern: "*.png;*.jpg;*.gif"},
    }).
    PromptForSingleSelection()

if err != nil {
    // User cancelled or error occurred
    return
}

// Use the selected file
processFile(path)
```

#### PromptForMultipleSelection()

Shows the dialog and returns multiple selected files.

```go
func (d *OpenFileDialog) PromptForMultipleSelection() ([]string, error)
```

**Returns:**
- `[]string` - Array of selected file paths
- `error` - Error if cancelled or failed

**Example:**
```go
paths, err := app.OpenFileDialog().
    SetTitle("Select Images").
    SetFilters([]application.FileFilter{
        {DisplayName: "Images", Pattern: "*.png;*.jpg"},
    }).
    PromptForMultipleSelection()

if err != nil {
    return
}

for _, path := range paths {
    processFile(path)
}
```

### SaveFileDialog()

Creates a file save dialog.

```go
func (a *App) SaveFileDialog() *SaveFileDialog
```

**Example:**
```go
dialog := app.SaveFileDialog()
```

### SaveFileDialog Methods

#### SetTitle()

Sets the dialog title.

```go
func (d *SaveFileDialog) SetTitle(title string) *SaveFileDialog
```

#### SetDefaultFilename()

Sets the default filename.

```go
func (d *SaveFileDialog) SetDefaultFilename(filename string) *SaveFileDialog
```

**Example:**
```go
dialog.SetDefaultFilename("document.pdf")
```

#### SetFilters()

Sets file type filters (same as OpenFileDialog).

```go
func (d *SaveFileDialog) SetFilters(filters []FileFilter) *SaveFileDialog
```

#### SetDefaultDirectory()

Sets the initial directory (same as OpenFileDialog).

```go
func (d *SaveFileDialog) SetDefaultDirectory(path string) *SaveFileDialog
```

#### PromptForSingleSelection()

Shows the dialog and returns the save path.

```go
func (d *SaveFileDialog) PromptForSingleSelection() (string, error)
```

**Example:**
```go
path, err := app.SaveFileDialog().
    SetTitle("Save Document").
    SetDefaultFilename("untitled.pdf").
    SetFilters([]application.FileFilter{
        {DisplayName: "PDF Document", Pattern: "*.pdf"},
    }).
    PromptForSingleSelection()

if err != nil {
    // User cancelled
    return
}

// Save to the selected path
saveDocument(path)
```

### SelectFolderDialog()

Creates a folder selection dialog.

```go
func (a *App) SelectFolderDialog() *SelectFolderDialog
```

**Example:**
```go
dialog := app.SelectFolderDialog()
```

### SelectFolderDialog Methods

#### SetTitle()

Sets the dialog title.

```go
func (d *SelectFolderDialog) SetTitle(title string) *SelectFolderDialog
```

#### SetDefaultDirectory()

Sets the initial directory.

```go
func (d *SelectFolderDialog) SetDefaultDirectory(path string) *SelectFolderDialog
```

#### PromptForSingleSelection()

Shows the dialog and returns the selected folder.

```go
func (d *SelectFolderDialog) PromptForSingleSelection() (string, error)
```

**Example:**
```go
path, err := app.SelectFolderDialog().
    SetTitle("Select Output Folder").
    PromptForSingleSelection()

if err != nil {
    // User cancelled
    return
}

// Use the selected folder
outputDir = path
```

## Message Dialogs

### InfoDialog()

Creates an information dialog.

```go
func (a *App) InfoDialog() *InfoDialog
```

**Example:**
```go
dialog := app.InfoDialog()
```

### InfoDialog Methods

#### SetTitle()

Sets the dialog title.

```go
func (d *InfoDialog) SetTitle(title string) *InfoDialog
```

#### SetMessage()

Sets the dialog message.

```go
func (d *InfoDialog) SetMessage(message string) *InfoDialog
```

#### Show()

Shows the dialog.

```go
func (d *InfoDialog) Show()
```

**Example:**
```go
app.InfoDialog().
    SetTitle("Success").
    SetMessage("File saved successfully!").
    Show()
```

### ErrorDialog()

Creates an error dialog.

```go
func (a *App) ErrorDialog() *ErrorDialog
```

**Methods:** Same as InfoDialog (SetTitle, SetMessage, Show)

**Example:**
```go
app.ErrorDialog().
    SetTitle("Error").
    SetMessage("Failed to save file: " + err.Error()).
    Show()
```

### WarningDialog()

Creates a warning dialog.

```go
func (a *App) WarningDialog() *WarningDialog
```

**Methods:** Same as InfoDialog (SetTitle, SetMessage, Show)

**Example:**
```go
app.WarningDialog().
    SetTitle("Warning").
    SetMessage("This action cannot be undone.").
    Show()
```

### QuestionDialog()

Creates a question dialog with custom buttons.

```go
func (a *App) QuestionDialog() *QuestionDialog
```

### QuestionDialog Methods

#### SetTitle()

Sets the dialog title.

```go
func (d *QuestionDialog) SetTitle(title string) *QuestionDialog
```

#### SetMessage()

Sets the dialog message.

```go
func (d *QuestionDialog) SetMessage(message string) *QuestionDialog
```

#### SetButtons()

Sets the button labels.

```go
func (d *QuestionDialog) SetButtons(buttons ...string) *QuestionDialog
```

**Parameters:**
- `buttons` - Variable number of button labels

**Example:**
```go
dialog.SetButtons("Yes", "No")
dialog.SetButtons("Save", "Don't Save", "Cancel")
```

#### SetDefaultButton()

Sets which button is the default (activated by pressing Enter).

```go
func (d *QuestionDialog) SetDefaultButton(index int) *QuestionDialog
```

**Example:**
```go
// Make "Yes" the default button
dialog.SetButtons("Yes", "No").SetDefaultButton(0)
```

#### SetCancelButton()

Sets which button is the cancel button (activated by pressing Escape).

```go
func (d *QuestionDialog) SetCancelButton(index int) *QuestionDialog
```

**Example:**
```go
// Make "Cancel" the cancel button
dialog.SetButtons("Save", "Don't Save", "Cancel").SetCancelButton(2)
```

#### Show()

Shows the dialog and returns the selected button.

```go
func (d *QuestionDialog) Show() (string, error)
```

**Returns:**
- `string` - The label of the button that was clicked
- `error` - Error if dialog failed to show

**Example:**
```go
result, err := app.QuestionDialog().
    SetTitle("Confirm").
    SetMessage("Do you want to save changes?").
    SetButtons("Save", "Don't Save", "Cancel").
    SetDefaultButton(0).
    SetCancelButton(2).
    Show()

if err != nil {
    return
}

switch result {
case "Save":
    saveDocument()
case "Don't Save":
    // Continue without saving
case "Cancel":
    return
}
```

## Complete Examples

### File Selection Example

```go
type FileService struct {
    app *application.Application
}

func (s *FileService) OpenImage() (string, error) {
    path, err := s.app.OpenFileDialog().
        SetTitle("Select Image").
        SetFilters([]application.FileFilter{
            {DisplayName: "Images", Pattern: "*.png;*.jpg;*.jpeg;*.gif"},
            {DisplayName: "All Files", Pattern: "*.*"},
        }).
        PromptForSingleSelection()

    if err != nil {
        return "", err
    }

    return path, nil
}

func (s *FileService) SaveDocument(defaultName string) (string, error) {
    path, err := s.app.SaveFileDialog().
        SetTitle("Save Document").
        SetDefaultFilename(defaultName).
        SetFilters([]application.FileFilter{
            {DisplayName: "PDF Document", Pattern: "*.pdf"},
            {DisplayName: "Text Document", Pattern: "*.txt"},
        }).
        PromptForSingleSelection()

    if err != nil {
        return "", err
    }

    return path, nil
}

func (s *FileService) SelectOutputFolder() (string, error) {
    path, err := s.app.SelectFolderDialog().
        SetTitle("Select Output Folder").
        PromptForSingleSelection()

    if err != nil {
        return "", err
    }

    return path, nil
}
```

### Confirmation Dialog Example

```go
func (s *Service) DeleteItem(id string) error {
    // Confirm before deleting
    result, err := s.app.QuestionDialog().
        SetTitle("Confirm Delete").
        SetMessage("Are you sure you want to delete this item?").
        SetButtons("Delete", "Cancel").
        SetDefaultButton(1). // Default to Cancel
        SetCancelButton(1).
        Show()

    if err != nil || result == "Cancel" {
        return nil // User cancelled
    }

    // Perform deletion
    return deleteFromDatabase(id)
}
```

### Save Changes Dialog

```go
func (s *Editor) PromptSaveChanges() (bool, error) {
    result, err := s.app.QuestionDialog().
        SetTitle("Unsaved Changes").
        SetMessage("Do you want to save your changes before closing?").
        SetButtons("Save", "Don't Save", "Cancel").
        SetDefaultButton(0).
        SetCancelButton(2).
        Show()

    if err != nil {
        return false, err
    }

    switch result {
    case "Save":
        return s.Save()
    case "Don't Save":
        return true, nil
    case "Cancel":
        return false, nil
    }

    return false, nil
}
```

### Multi-File Processing

```go
func (s *Service) ProcessMultipleFiles() error {
    // Select multiple files
    paths, err := s.app.OpenFileDialog().
        SetTitle("Select Files to Process").
        SetFilters([]application.FileFilter{
            {DisplayName: "Images", Pattern: "*.png;*.jpg"},
        }).
        PromptForMultipleSelection()

    if err != nil {
        return err
    }

    if len(paths) == 0 {
        s.app.InfoDialog().
            SetTitle("No Files Selected").
            SetMessage("Please select at least one file.").
            Show()
        return nil
    }

    // Process files
    for i, path := range paths {
        err := processFile(path)
        if err != nil {
            s.app.ErrorDialog().
                SetTitle("Processing Error").
                SetMessage(fmt.Sprintf("Failed to process %s: %v", path, err)).
                Show()
            continue
        }

        // Show progress
        s.app.EmitEvent("progress", map[string]interface{}{
            "current": i + 1,
            "total":   len(paths),
        })
    }

    // Show completion
    s.app.InfoDialog().
        SetTitle("Complete").
        SetMessage(fmt.Sprintf("Successfully processed %d files", len(paths))).
        Show()

    return nil
}
```

### Error Handling with Dialogs

```go
func (s *Service) SaveFile(data []byte) error {
    // Select save location
    path, err := s.app.SaveFileDialog().
        SetTitle("Save File").
        SetDefaultFilename("data.json").
        SetFilters([]application.FileFilter{
            {DisplayName: "JSON File", Pattern: "*.json"},
        }).
        PromptForSingleSelection()

    if err != nil {
        // User cancelled - not an error
        return nil
    }

    // Attempt to save
    err = os.WriteFile(path, data, 0644)
    if err != nil {
        // Show error dialog
        s.app.ErrorDialog().
            SetTitle("Save Failed").
            SetMessage(fmt.Sprintf("Could not save file: %v", err)).
            Show()
        return err
    }

    // Show success
    s.app.InfoDialog().
        SetTitle("Success").
        SetMessage("File saved successfully!").
        Show()

    return nil
}
```

### Platform-Specific Defaults

```go
import (
    "os"
    "path/filepath"
    "runtime"
)

func (s *Service) GetDefaultDirectory() string {
    homeDir, _ := os.UserHomeDir()

    switch runtime.GOOS {
    case "windows":
        return filepath.Join(homeDir, "Documents")
    case "darwin":
        return filepath.Join(homeDir, "Documents")
    case "linux":
        return filepath.Join(homeDir, "Documents")
    default:
        return homeDir
    }
}

func (s *Service) OpenWithDefaults() (string, error) {
    return s.app.OpenFileDialog().
        SetTitle("Open File").
        SetDefaultDirectory(s.GetDefaultDirectory()).
        SetFilters([]application.FileFilter{
            {DisplayName: "All Files", Pattern: "*.*"},
        }).
        PromptForSingleSelection()
}
```

## Best Practices

### ✅ Do

- **Use native dialogs** - They match the platform's look and feel
- **Provide clear titles** - Help users understand the purpose
- **Set appropriate filters** - Guide users to correct file types
- **Handle cancellation** - Check for errors (user may cancel)
- **Show confirmation for destructive actions** - Use QuestionDialog
- **Provide feedback** - Use InfoDialog for success messages
- **Set sensible defaults** - Default directory, filename, etc.

### ❌ Don't

- **Don't ignore errors** - User cancellation returns an error
- **Don't use ambiguous button labels** - "OK" vs "Save"/"Cancel"
- **Don't overuse dialogs** - They interrupt workflow
- **Don't show errors for cancellation** - It's a normal action
- **Don't forget file filters** - Help users find the right files
- **Don't hardcode paths** - Use os.UserHomeDir() or similar

## Dialog Types by Platform

### macOS

- Dialogs slide down from title bar
- "Sheet" style attached to parent window
- Native macOS appearance

### Windows

- Standard Windows dialogs
- Follows Windows design guidelines
- Modern Windows 10/11 appearance

### Linux

- GTK dialogs on GTK-based systems
- Qt dialogs on Qt-based systems
- Matches desktop environment

## Common Patterns

### "Save As" Pattern

```go
func (s *Service) SaveAs(currentPath string) (string, error) {
    // Extract filename from current path
    filename := filepath.Base(currentPath)

    // Show save dialog
    path, err := s.app.SaveFileDialog().
        SetTitle("Save As").
        SetDefaultFilename(filename).
        PromptForSingleSelection()

    if err != nil {
        return "", err
    }

    return path, nil
}
```

### "Open Recent" Pattern

```go
func (s *Service) OpenRecent(recentPath string) error {
    // Check if file still exists
    if _, err := os.Stat(recentPath); os.IsNotExist(err) {
        result, _ := s.app.QuestionDialog().
            SetTitle("File Not Found").
            SetMessage("The file no longer exists. Remove from recent files?").
            SetButtons("Remove", "Cancel").
            Show()

        if result == "Remove" {
            s.removeFromRecent(recentPath)
        }

        return err
    }

    return s.openFile(recentPath)
}
```
