<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch API Demo</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #eee;
            min-height: 100vh;
            padding: 20px;
        }
        .container { max-width: 900px; margin: 0 auto; }
        h1 { color: #4ade80; margin-bottom: 10px; }
        .description { color: #aaa; margin-bottom: 30px; }
        .card {
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        h2 { font-size: 1.2rem; margin-bottom: 15px; color: #e94560; }
        .form-group { margin-bottom: 15px; }
        .form-row { display: flex; gap: 10px; align-items: end; }
        .form-row .form-group { flex: 1; }
        label { display: block; margin-bottom: 5px; color: #aaa; font-size: 0.9rem; }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #333;
            border-radius: 6px;
            background: #1a1a2e;
            color: #eee;
            font-size: 1rem;
        }
        button {
            background: #4ade80;
            color: #1a1a2e;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        button:hover { opacity: 0.9; }
        button.secondary { background: #60a5fa; }
        .output {
            background: #0a0a1a;
            border-radius: 6px;
            padding: 15px;
            font-family: monospace;
            font-size: 0.85rem;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            word-break: break-all;
        }
        .status { padding: 10px; border-radius: 6px; margin-bottom: 20px; }
        .status.success { background: rgba(74, 222, 128, 0.2); color: #4ade80; }
        .status.error { background: rgba(248, 113, 113, 0.2); color: #f87171; }
        .status.loading { background: rgba(96, 165, 250, 0.2); color: #60a5fa; }
        .tabs { display: flex; gap: 5px; margin-bottom: 15px; }
        .tab {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid #333;
            color: #aaa;
            cursor: pointer;
        }
        .tab.active { background: #4ade80; color: #1a1a2e; border-color: #4ade80; }
        .response-info { display: flex; gap: 20px; margin-bottom: 15px; flex-wrap: wrap; }
        .response-info span { padding: 5px 10px; background: rgba(0,0,0,0.3); border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Fetch API Demo</h1>
        <p class="description">
            The Fetch API provides a modern interface for making HTTP requests.
            It returns Promises and supports various request/response types.
        </p>

        <div id="status" class="status success">
            Fetch API available: <span id="available">checking...</span>
        </div>

        <div class="card">
            <h2>Make Request</h2>
            <div class="form-row">
                <div class="form-group" style="flex: 0 0 120px;">
                    <label for="method">Method</label>
                    <select id="method">
                        <option value="GET">GET</option>
                        <option value="POST">POST</option>
                        <option value="PUT">PUT</option>
                        <option value="DELETE">DELETE</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="url">URL</label>
                    <input type="text" id="url" value="https://jsonplaceholder.typicode.com/posts/1">
                </div>
            </div>
            <div class="form-group">
                <label for="headers">Headers (JSON)</label>
                <textarea id="headers" rows="2" placeholder='{"Content-Type": "application/json"}'></textarea>
            </div>
            <div class="form-group">
                <label for="body">Body (for POST/PUT)</label>
                <textarea id="body" rows="3" placeholder='{"title": "foo", "body": "bar", "userId": 1}'></textarea>
            </div>
            <button onclick="makeRequest()">Send Request</button>
            <button class="secondary" onclick="loadExample('posts')">Example: Get Posts</button>
            <button class="secondary" onclick="loadExample('users')">Example: Get Users</button>
            <button class="secondary" onclick="loadExample('create')">Example: Create Post</button>
        </div>

        <div class="card">
            <h2>Response</h2>
            <div id="responseStatus" class="status" style="display: none;"></div>
            <div class="response-info" id="responseInfo" style="display: none;">
                <span>Status: <strong id="resStatus"></strong></span>
                <span>Type: <strong id="resType"></strong></span>
                <span>Time: <strong id="resTime"></strong></span>
            </div>
            <div class="tabs">
                <button class="tab active" onclick="showTab('body')">Body</button>
                <button class="tab" onclick="showTab('headers')">Headers</button>
            </div>
            <div id="responseBody" class="output">Make a request to see the response...</div>
            <div id="responseHeaders" class="output" style="display: none;"></div>
        </div>

        <div class="card">
            <h2>Fetch API Features</h2>
            <div class="output">
fetch(url, options) returns a Promise&lt;Response&gt;

Options:
- method: 'GET', 'POST', 'PUT', 'DELETE', etc.
- headers: Headers object or plain object
- body: String, FormData, Blob, ArrayBuffer, URLSearchParams
- mode: 'cors', 'no-cors', 'same-origin'
- credentials: 'omit', 'same-origin', 'include'
- cache: 'default', 'no-store', 'reload', 'no-cache', 'force-cache'
- redirect: 'follow', 'error', 'manual'
- signal: AbortController.signal for cancellation

Response methods:
- response.json() - Parse as JSON
- response.text() - Get as text
- response.blob() - Get as Blob
- response.arrayBuffer() - Get as ArrayBuffer
- response.formData() - Get as FormData

Response properties:
- response.ok (status 200-299)
- response.status
- response.statusText
- response.headers
- response.url
- response.type</div>
        </div>
    </div>

    <script>
        let currentTab = 'body';

        function checkFetch() {
            const available = typeof fetch !== 'undefined';
            document.getElementById('available').textContent = available ? 'Yes' : 'No';
            document.getElementById('status').className = available ? 'status success' : 'status error';
            return available;
        }

        function loadExample(type) {
            const method = document.getElementById('method');
            const url = document.getElementById('url');
            const headers = document.getElementById('headers');
            const body = document.getElementById('body');

            switch (type) {
                case 'posts':
                    method.value = 'GET';
                    url.value = 'https://jsonplaceholder.typicode.com/posts?_limit=5';
                    headers.value = '';
                    body.value = '';
                    break;
                case 'users':
                    method.value = 'GET';
                    url.value = 'https://jsonplaceholder.typicode.com/users';
                    headers.value = '';
                    body.value = '';
                    break;
                case 'create':
                    method.value = 'POST';
                    url.value = 'https://jsonplaceholder.typicode.com/posts';
                    headers.value = '{"Content-Type": "application/json"}';
                    body.value = JSON.stringify({ title: 'foo', body: 'bar', userId: 1 }, null, 2);
                    break;
            }
        }

        async function makeRequest() {
            const method = document.getElementById('method').value;
            const url = document.getElementById('url').value;
            const headersStr = document.getElementById('headers').value;
            const bodyStr = document.getElementById('body').value;

            const statusEl = document.getElementById('responseStatus');
            const infoEl = document.getElementById('responseInfo');
            const bodyEl = document.getElementById('responseBody');
            const headersEl = document.getElementById('responseHeaders');

            statusEl.style.display = 'block';
            statusEl.className = 'status loading';
            statusEl.textContent = 'Loading...';
            infoEl.style.display = 'none';

            const startTime = performance.now();

            try {
                const options = { method };

                if (headersStr) {
                    options.headers = JSON.parse(headersStr);
                }

                if (bodyStr && (method === 'POST' || method === 'PUT')) {
                    options.body = bodyStr;
                }

                const response = await fetch(url, options);
                const endTime = performance.now();

                // Display response info
                infoEl.style.display = 'flex';
                document.getElementById('resStatus').textContent = `${response.status} ${response.statusText}`;
                document.getElementById('resType').textContent = response.headers.get('content-type') || 'unknown';
                document.getElementById('resTime').textContent = `${(endTime - startTime).toFixed(0)}ms`;

                // Display headers
                let headersText = '';
                response.headers.forEach((value, key) => {
                    headersText += `${key}: ${value}\n`;
                });
                headersEl.textContent = headersText || 'No headers';

                // Display body
                const contentType = response.headers.get('content-type') || '';
                let bodyText;
                if (contentType.includes('application/json')) {
                    const json = await response.json();
                    bodyText = JSON.stringify(json, null, 2);
                } else {
                    bodyText = await response.text();
                }
                bodyEl.textContent = bodyText;

                statusEl.className = response.ok ? 'status success' : 'status error';
                statusEl.textContent = response.ok ? 'Request successful' : `Request failed: ${response.status}`;

            } catch (e) {
                statusEl.className = 'status error';
                statusEl.textContent = 'Error: ' + e.message;
                bodyEl.textContent = e.stack || e.message;
            }
        }

        function showTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab[onclick="showTab('${tab}')"]`).classList.add('active');
            document.getElementById('responseBody').style.display = tab === 'body' ? 'block' : 'none';
            document.getElementById('responseHeaders').style.display = tab === 'headers' ? 'block' : 'none';
        }

        checkFetch();
    </script>
</body>
</html>
